<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>New Hacker Tab</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" type="image/png" href="/img/favicon-32x32.png?v=1.0">
		<link rel="stylesheet" href="css/spectre.min.css">
		<link rel="stylesheet" href="css/spectre-exp.min.css">
		<link rel="stylesheet" href="css/spectre-icons.min.css">
		<style type="text/css" media="screen">
#change-view {
	display:none;
	background: #fff;
}
#editor-button {
	position: fixed;
	bottom: 10px;
	right: 10px;
	z-index: 1000;
}
#editor {
	position: absolute;
	top: 56px;
	right: 0px;
	bottom: 0px;
	left: 0px;
}
.navbar {
	padding: 10px;
}
		</style>
	</head>
	<body>
		<div id="content-view">
			<button id="editor-button" class="btn btn-action s-circle" onclick="toggle()"><i class="icon icon-edit"></i></button>
			<div id="content"></div>
		</div>
		<div id="change-view">
			<header class="navbar">
				<section class="navbar-section">
					<a href="https://www.new-hacker-tab.com" class="navbar-brand mr-2">New-Hacker-Tab.com</a>
				</section>
				<section class="navbar-center">
					<!-- centered logo or brand -->
				</section>
				<section class="navbar-section">
					<label class="form-switch">
						<input type="checkbox" id="vim-checkbox" onChange="toggleKeys()">
						<i class="form-icon"></i> Vim Keys
					</label>
					<div class="btn-group btn-group-block">
						<a href="#" class="btn" onclick="importFile()">Import</a>
						<a href="#" class="btn" onclick="exportFile()">Export</a>
					</div>
					<a href="#" class="btn btn-link" onclick="reset()">Reset</a>
					<div class="btn-group btn-group-block">
						<a href="#" class="btn" onclick="cancel()">Cancel</a>
						<a href="#" class="btn active" onclick="save()">Save</a>
					</div>
				</section>
			</header>
			<div id="editor"></div>
		</div>
		<a id="hiddenDownloadHelper" style="display:none;"></a>

		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/localforage.min.js"></script>
		<script src="js/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
		<script>
// NOTE: using a base64 string here to avoid conflicts with script tags
var defaultStr='eyJjb2RlIjoiPHN0eWxlPlxuXHQvKiBiYWNrZ3JvdW5kLWltZyAqL1xuXHRib2R5IHtcblx0XHRiYWNrZ3JvdW5kOiAjZjZmNmY2O1xuXHR9XG5cdEBtZWRpYSAobWluLXdpZHRoOiA5NjBweCkge1xuICAgIFx0aHRtbCB7XG4gICAgXHRcdG1pbi1oZWlnaHQ6IDEwMCU7XG4gICAgXHR9XG4gICAgXHRib2R5IHtcbiAgICBcdFx0bWluLWhlaWdodDogMTAwJTtcbiAgICBcdFx0YmFja2dyb3VuZC1hdHRhY2htZW50OiBmaXhlZDtcbiAgICBcdFx0YmFja2dyb3VuZC1pbWFnZTogdXJsKCcvaW1nL2JhY2tncm91bmRfMDEuanBnJyk7XG4gICAgXHRcdGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgXHRcdGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgXHR9XG5cdH1cblxuXHQvKiBncmlkLWxheW91dCAqL1xuICAgIC5ncmlkLWNvbnRhaW5lciB7XG5cdFx0bWFyZ2luOiAxNnB4O1xuXHRcdHRleHQtYWxpZ246IGxlZnQ7XG4gICAgXHRkaXNwbGF5OiBncmlkO1xuICAgIFx0Z3JpZC1nYXA6IDEwcHg7XG4gICAgfVxuXHRAbWVkaWEgKG1heC13aWR0aDogOTU5cHgpIHtcbiAgICBcdC5ncmlkLWNvbnRhaW5lciB7XG4gICAgXHRcdGdyaWQtdGVtcGxhdGUtYXJlYXM6XG4gICAgXHRcdFx0J3NlYXJjaCdcbiAgICBcdFx0ICAgICdjZW50ZXInXG4gICAgXHRcdFx0J2xlZnQnXG4gICAgXHRcdCAgICAncmlnaHQnO1xuICAgIFx0fVxuICAgIH1cblx0QG1lZGlhIChtaW4td2lkdGg6IDk2MHB4KSB7XG4gICAgXHQuZ3JpZC1jb250YWluZXIge1xuICAgIFx0XHRncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDMwMHB4IGF1dG8gMzAwcHg7XG4gICAgXHRcdGdyaWQtdGVtcGxhdGUtYXJlYXM6XG4gICAgXHRcdFx0J3NlYXJjaCBzZWFyY2ggc2VhcmNoJ1xuICAgIFx0XHRcdCdsZWZ0IGNlbnRlciByaWdodCc7XG4gICAgXHR9XG4gICAgfVxuXHQuc2VhcmNoIHtcblx0XHRncmlkLWFyZWE6IHNlYXJjaFxuXHR9XG5cdC5sZWZ0IHtcblx0XHRncmlkLWFyZWE6IGxlZnRcblx0fVxuXHQucmlnaHQge1xuXHRcdGdyaWQtYXJlYTogcmlnaHRcblx0fVxuXHQubm90ZXMge1xuXHRcdGdyaWQtYXJlYTogY2VudGVyO1xuXHRcdG1hcmdpbi10b3A6IDRweDtcblx0fVxuXHQud2lkZ2V0IHtcblx0ICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG5cdH1cblxuXHQvKiBVbmNvbW1lbnQgaWYgeW91IHdhbnQgdG8gaGlkZSB0aGUgZWRpdCBidXR0b24gKi9cblx0LyojZWRpdG9yLWJ1dHRvbiB7XG5cdG9wYWNpdHk6IDAuMDAxO1xuXHR9XG5cdCNlZGl0b3ItYnV0dG9uOmhvdmVyIHtcblx0XHRvcGFjaXR5OiAxLjA7XG5cdH0qL1xuPC9zdHlsZT5cblxuPGRpdiBjbGFzcz1cImdyaWQtY29udGFpbmVyXCI+XG5cdDwhLS0gc2VhcmNoIC0tPlxuXHQ8ZGl2IGNsYXNzPVwic2VhcmNoIHdpZGdldFwiPlxuXHRcdDxzY3JpcHQ+XG5cdFx0XHQvLyBmb2N1cyB0aGUgc2VhcmNoIGJhciBvbiBsb2FkXG5cdFx0XHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXHRcdFx0XHQkKFwiI3NlYXJjaC1pbnB1dFwiKS5mb2N1cygpXG5cdFx0XHR9KVxuXG5cdFx0XHQvLyB0aGlzIGZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZCB3aGVuIHRoZSBzZWFyY2ggYmFyIGZvcm0gaXMgYmVpbmcgc3VibWl0dGVkXG5cdFx0XHRmdW5jdGlvbiBzZWFyY2goKSB7XG5cdFx0XHRcdC8vIGdldCB0aGUgc2VhcmNoIHN0cmluZ1xuXHRcdFx0XHRzZWFyY2hTdHI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2gtaW5wdXRcIikudmFsdWVcblxuXHRcdFx0XHQvLyBjb3VudCB0aGUgd29yZHMgc2VwYXJhdGVkIGJ5IHNwYWNlc1xuXHRcdFx0XHRudW1iZXJPZldvcmRzPShzZWFyY2hTdHIuc3BsaXQoXCIgXCIpLmxlbmd0aClcblxuXHRcdFx0XHRpZihzZWFyY2hTdHIubWF0Y2goL15bXlxcLiBdKlxcLlteXFwvIF0qLykgIT09IG51bGwpIHtcblx0XHRcdFx0XHQvLyBpZiB0aGUgZmlyc3QgcGFydCBsb29rcyBsaWtlIGEgZG9tYWluLCBqdXN0IGdvIGZvciBpdFxuXHRcdFx0XHRcdGxvY2F0aW9uLmhyZWY9XCJodHRwczovL1wiICsgc2VhcmNoU3RyXG5cdFx0XHRcdH0gZWxzZSBpZiAobnVtYmVyT2ZXb3JkcyA9PSAxKSB7XG5cdFx0XHRcdFx0Ly8gZWxzZSBpZiBpdCBpcyBqdXN0IG9uZSB3b3JkIHVzZSBhIGRpY3Rpb25hcnkgbGlrZSBsaW5ndWVlXG5cdFx0XHRcdFx0bG9jYXRpb24uaHJlZj1cImh0dHBzOi8vd3d3Lmxpbmd1ZWUuY29tL3NlYXJjaD9xdWVyeT1cIiArIGVuY29kZVVSSShzZWFyY2hTdHIpXG5cdFx0XHRcdFx0Ly8gb3IgZGljdC5jY1xuXHRcdFx0XHRcdC8vIGxvY2F0aW9uLmhyZWY9XCJodHRwczovL2RpY3QuY2MvP3M9XCIgKyBlbmNvZGVVUkkoc2VhcmNoU3RyKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIGVsc2UgdXNlIGR1Y2tkdWNrZ29cblx0XHRcdFx0XHRsb2NhdGlvbi5ocmVmPVwiaHR0cHM6Ly9kdWNrZHVja2dvLmNvbS8/cT1cIiArIGVuY29kZVVSSShzZWFyY2hTdHIpXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBjYW5jZWwgdGhlIGZvcm0gc3VibWlzc2lvblxuXHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdH1cblx0XHQ8L3NjcmlwdD5cblx0XHQ8c3R5bGU+XG5cdFx0XHQuaGVybyB7XG5cdFx0XHRcdHRleHQtYWxpZ246IGNlbnRlcjtcblx0XHRcdH1cblx0XHQ8L3N0eWxlPlxuXHRcdDxkaXYgY2xhc3M9XCJoZXJvXCI+XG5cdFx0XHQ8ZGl2IGNsYXM9XCJoZXJvLWJvZHlcIj5cblx0XHRcdFx0PGgxPldlbGNvbWUgSG9tZTwvaDE+XG5cdFx0XHRcdDxmb3JtIGNsYXNzPVwiaW5wdXQtZ3JvdXAgaW5wdXQtaW5saW5lXCIgb25zdWJtaXQ9XCJyZXR1cm4gc2VhcmNoKClcIiBzdHlsZT1cIndpZHRoOiA4MCU7IG1heC13aWR0aDogNjQwcHg7XCI+XG5cdFx0XHRcdFx0PGlucHV0IGlkPVwic2VhcmNoLWlucHV0XCIgY2xhc3M9XCJmb3JtLWlucHV0XCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaC4uLlwiPlxuXHRcdFx0XHRcdDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGlucHV0LWdyb3VwLWJ0blwiPjxpIGNsYXNzPVwiaWNvbiBpY29uLXNlYXJjaFwiPjwvaT48L2J1dHRvbj5cblx0XHRcdFx0PC9mb3JtPlxuXHRcdFx0PC9kaXY+XG5cdFx0PC9kaXY+XG5cdDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImxlZnRcIj5cbiAgICBcdDwhLS0gbmV3cyAtLT5cbiAgICBcdDxkaXYgY2xhc3M9XCJuZXdzIHdpZGdldFwiPlxuICAgIFx0XHQ8c2NyaXB0PlxuICAgIFx0XHRcdCQuZ2V0KFwiaHR0cHM6Ly9oYWNrZXItbmV3cy5maXJlYmFzZWlvLmNvbS92MC9iZXN0c3Rvcmllcy5qc29uXCIsIGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgIFx0XHRcdFx0Zm9yKHZhciBpPTA7aTwzO2krKykge1xuICAgIFx0XHRcdFx0XHQvLyBvcmRlciBpcyBub3QgcHJlc2VydmVkXG4gICAgXHRcdFx0XHRcdCQuZ2V0KFwiaHR0cHM6Ly9oYWNrZXItbmV3cy5maXJlYmFzZWlvLmNvbS92MC9pdGVtL1wiICsgZGF0YVtpXSArIFwiLmpzb25cIiwgZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgXHRcdFx0XHRcdFx0dmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBcdFx0XHRcdFx0XHRsaS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lbnUtaXRlbVwiKVxuICAgIFx0XHRcdFx0XHRcdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIFx0XHRcdFx0XHRcdGlmIChkYXRhLnVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgJ2h0dHBzOi8vbmV3cy55Y29tYmluYXRvci5jb20vaXRlbT9pZD0nICsgZGF0YS5pZCk7XG4gICAgXHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRcdFx0XHRcdGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBkYXRhLnVybCk7XG4gICAgXHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHRcdGxpbmsudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlXG4gICAgXHRcdFx0XHRcdFx0bGkuYXBwZW5kQ2hpbGQobGluaylcbiAgICBcdFx0XHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhuLWNvbnRhaW5lclwiKS5hcHBlbmRDaGlsZChsaSlcbiAgICBcdFx0XHRcdFx0fSlcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9KTtcbiAgICBcdFx0PC9zY3JpcHQ+XG4gICAgXHRcdDxzdHlsZT5cbiAgICBcdFx0XHQjaG4tY29udGFpbmVyIGE6dmlzaXRlZCB7XG4gICAgXHRcdFx0XHRjb2xvcjogaHNsYSgwLCAwJSwgMTAwJSwgMC4wMSk7XG4gICAgXHRcdFx0XHRiYWNrZ3JvdW5kOiBoc2xhKDAsIDAlLCAxMDAlLCAwLjAxKTtcbiAgICBcdFx0XHR9XG4gICAgXHRcdDwvc3R5bGU+XG4gICAgXHRcdDx1bCBpZD1cImhuLWNvbnRhaW5lclwiIGNsYXNzPVwibWVudSBmaXJzdC1yb3dcIiBzdHlsZT1cInRleHQtYWxpZ246IGxlZnQ7XCI+XG4gICAgXHRcdFx0PGxpIGNsYXNzPVwiZGl2aWRlclwiIGRhdGEtY29udGVudD1cIkJlc3QgSGFja2VybmV3c1wiPjwvbGk+XG4gICAgXHRcdDwvdWw+XG4gICAgXHQ8L2Rpdj5cbiAgICBcdFxuICAgIFx0PCEtLSBsaW5rcyAtLT5cbiAgICBcdDxkaXYgY2xhc3M9XCJsaW5rcyB3aWRnZXRcIj5cbiAgICBcdFx0PHVsIGNsYXNzPVwibWVudVwiPlxuICAgIFx0XHRcdDxsaSBjbGFzcz1cImRpdmlkZXJcIiBkYXRhLWNvbnRlbnQ9XCJMaW5rc1wiPjwvbGk+XG4gICAgXHRcdFx0PGxpIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgXHRcdFx0XHQ8YSBocmVmPVwiaHR0cHM6Ly9waWN0dXJlcGFuMi5naXRodWIuaW8vc3BlY3RyZS9nZXR0aW5nLXN0YXJ0ZWQuaHRtbFwiPjxpIGNsYXNzPVwiaWNvbiBpY29uLWxpbmtcIj48L2k+IFNwZWN0cmUgQ1NTPC9hPlxuICAgIFx0XHRcdDwvbGk+XG4gICAgXHRcdFx0PGxpIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgXHRcdFx0XHQ8YSBocmVmPVwiaHR0cHM6Ly9uZXctaGFja2VyLXRhYi5jb20vZG9jc1wiPjxpIGNsYXNzPVwiaWNvbiBpY29uLWxpbmtcIj48L2k+IE5ldyBIYWNrZXIgVGFiIERvY3M8L2E+XG4gICAgXHRcdFx0PC9saT5cbiAgICBcdFx0PC91bD5cbiAgICBcdDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIFxuICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuICAgIFx0PCEtLSB3ZWF0aGVyIC0tPlxuICAgIFx0PGRpdiBjbGFzcz1cIndlYXRoZXIgd2lkZ2V0XCI+XG4gICAgXHRcdDx1bCBpZD1cIndlYXRoZXItY29udGFpbmVyXCIgY2xhc3M9XCJtZW51IGZpcnN0LXJvd1wiPlxuICAgIFx0XHRcdDwhLS08bGkgY2xhc3M9XCJkaXZpZGVyXCIgZGF0YS1jb250ZW50PVwiV2VhdGhlciBGb3JlY2FzdFwiPjwvbGk+LS0+XG4gICAgXHRcdFx0PGxpIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgXHRcdFx0XHQ8IS0tIGh0dHBzOi8vd2VhdGhlcndpZGdldC5pby8gLS0+XG4gICAgXHRcdFx0XHQ8IS0tIHRoZSBmaXJzdCB0d28gbGV0dGVycyBhZnRlciB0aGUgZG9tYWluIGFyZSB0aGUgbGFuZ3VhZ2UgLS0+XG4gICAgXHRcdFx0XHQ8YSBjbGFzcz1cIndlYXRoZXJ3aWRnZXQtaW9cIiBocmVmPVwiaHR0cHM6Ly9mb3JlY2FzdDcuY29tL2VuLzQwZDcxbjc0ZDAxL25ldy15b3JrL1wiIGRhdGEtbGFiZWxfMT1cIk5FVyBZT1JLXCIgZGF0YS1sYWJlbF8yPVwiV0VBVEhFUlwiIGRhdGEtZm9udD1cIlJvYm90b1wiIGRhdGEtZGF5cz1cIjNcIiA+TkVXIFlPUksgV0VBVEhFUjwvYT5cbiAgICBcdFx0XHRcdDxzY3JpcHQ+XG4gICAgXHRcdFx0XHRcdCFmdW5jdGlvbihkLHMsaWQpe3ZhciBqcyxmanM9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXTtpZighZC5nZXRFbGVtZW50QnlJZChpZCkpe2pzPWQuY3JlYXRlRWxlbWVudChzKTtqcy5pZD1pZDtqcy5zcmM9J2h0dHBzOi8vd2VhdGhlcndpZGdldC5pby9qcy93aWRnZXQubWluLmpzJztmanMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoanMsZmpzKTt9fShkb2N1bWVudCwnc2NyaXB0Jywnd2VhdGhlcndpZGdldC1pby1qcycpO1xuICAgIFx0XHRcdFx0PC9zY3JpcHQ+XG4gICAgXHRcdFx0PC9saT5cbiAgICBcdFx0PC91bD5cbiAgICBcdDwvZGl2PlxuICAgIFx0XG4gICAgXHQ8IS0tIGFubm91bmNlbWVudHMgLS0+XG4gICAgXHQ8ZGl2IGNsYXNzPVwiYW5ub3VuY2VtZW50cyB3aWRnZXRcIj5cbiAgICBcdFx0PHVsIGNsYXNzPVwibWVudVwiPlxuICAgIFx0XHRcdDxsaSBjbGFzcz1cImRpdmlkZXJcIiBkYXRhLWNvbnRlbnQ9XCJBbm5vdW5jZW1lbnRzXCI+PC9saT5cbiAgICBcdFx0XHQ8bGkgY2xhc3M9XCJtZW51LWl0ZW1cIj5cbiAgICBcdFx0XHRcdDxpZnJhbWUgc3JjPVwiL2Fubm91bmNlbWVudHMuaHRtbFwiIHN0eWxlPVwibWFyZ2luOjA7IHBhc3Npbmc6IDA7IHdpZHRoOiAxMDAlOyBtaW4taGVpZ2h0OiAyNDBweDsgYm9yZGVyOm5vbmU7XCI+PC9pZnJhbWU+XG4gICAgXHRcdFx0PC9saT5cbiAgICBcdFx0PC91bD5cbiAgICBcdDwvZGl2PlxuICAgIDwvZGl2PlxuXG5cdDwhLS0gbm90ZXMgLS0+XG5cdDxkaXYgY2xhc3M9XCJub3RlcyB3aWRnZXRcIj5cblx0XHQ8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9zaW1wbGVtZGUvbGF0ZXN0L3NpbXBsZW1kZS5taW4uY3NzXCI+XG5cdFx0PHNjcmlwdCBzcmM9XCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvc2ltcGxlbWRlL2xhdGVzdC9zaW1wbGVtZGUubWluLmpzXCIgc3luYz48L3NjcmlwdD5cblx0XHQ8dGV4dGFyZWEgaWQ9XCJtYXJrZG93bi1lZGl0b3JcIj48L3RleHRhcmVhPlxuXHRcdDxzdHlsZT5cblx0XHRcdC5Db2RlTWlycm9yLXNjcm9sbCB7XG5cdFx0XHRcdG1pbi1oZWlnaHQ6IDUwMHB4O1xuXHRcdFx0fVxuXHRcdFx0LmVkaXRvci10b29sYmFyIHtcblx0XHRcdFx0YmFja2dyb3VuZDogI2ZmZjtcblx0XHRcdH1cblx0XHQ8L3N0eWxlPlxuXHRcdDxzY3JpcHQ+XG5cdFx0XHRmdW5jdGlvbiBsb2FkTURFKHJldHJpZXMpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBTaW1wbGVNREUgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcImxvYWRpbmcgbWRlIHdpdGggXCIgKyByZXRyaWVzICsgXCIgcmV0cmllcyBsZWZ0XCIpXG5cdFx0XHRcdFx0dmFyIHNpbXBsZW1kZSA9IG5ldyBTaW1wbGVNREUoe1xuXHRcdFx0XHRcdFx0YXV0b3NhdmU6IHtcblx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0dW5pcXVlSWQ6IFwiYmlnTURFXCIsXG5cdFx0XHRcdFx0XHRcdGRlbGF5OiAxMDAwLFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFya2Rvd24tZWRpdG9yXCIpLFxuXHRcdFx0XHRcdFx0c3BlbGxDaGVja2VyOiBmYWxzZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIGlmKHJldHJpZXMgPiAwKSB7XG5cdFx0XHRcdFx0c2V0VGltZW91dChsb2FkTURFLCAyMDAsIHJldHJpZXMgLTEpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJGYWlsZWQgbG9hZGluZyBTaW1wbGVNREUsIGdpdmluZyB1cC5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGxvYWRNREUoMTAwKTtcblx0XHQ8L3NjcmlwdD5cblx0PC9kaXY+XG5cbjwvZGl2PlxuXG4ifQ=='
var defaultValue=JSON.parse(window.atob(defaultStr)).code;
var state="content"
var editor = ace.edit("editor");
editor.setTheme("ace/theme/monokai");
editor.session.setMode("ace/mode/html");
load();
document.getElementById("vim-checkbox").checked = false;

function errorReporter(err) {
	console.log(err);
	alert('An error occured. You might want to take a look at the dev-tools.')
}
function toggle(){
	if (state == "content") {
		document.getElementById("content-view").style.display = "none";
		document.getElementById("change-view").style.display = "block";
		editor.resize()
		state="editor"
	} else {
		document.getElementById("content-view").style.display = "block";
		document.getElementById("change-view").style.display = "none";
		state="content"
	}
}
function save() {
	value=editor.getValue()
	localforage.setItem("content", value).catch(errorReporter);
	render(value)
	toggle()
}
function load(){
	localforage.getItem("content").then(function(value){
		if (value == null) {
			value=defaultValue;
		}
		render(value)
		editor.session.setValue(value);
	}).catch(errorReporter);
}
function cancel(){
	if (confirm("Do you want to go back without saving and reset the the state before the editor was opened?")) {
		load()
		toggle()
	}
}
function reset(){
	if (confirm("Do you want to reset the content to the initial value and delete all customizations you made?")) {
		localforage.removeItem("content").then(function(){
			load()
		}).catch(errorReporter);
	}
}
function exportFile(){
	container={}
	container.code = editor.getValue()
	var dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(container));
	var dlAnchorElem = document.getElementById('hiddenDownloadHelper');
	dlAnchorElem.setAttribute("href",     dataStr     );
	dlAnchorElem.setAttribute("download", "code-" + Date.now() + ".json");
	dlAnchorElem.click();
}
function render(html){
	// jquery executes all <script> tags accordingly
	$("#content").html(html);
}
function toggleKeys() {
	if (document.getElementById("vim-checkbox").checked) {
		editor.setKeyboardHandler('ace/keyboard/vim');
	} else {
		editor.setKeyboardHandler('ace/keyboard/ace');
	}
	editor.focus();
}
	</script>
	</body>
</html>
